frr version 8.5.4_git
frr defaults traditional
hostname r101
service advanced-vty
no ipv6 forwarding
service integrated-vtysh-config
!
interface eth1
 ip address 172.22.1.1/24
exit
!
interface eth2
 ip address 10.0.12.1/24
 ip ospf 1 area 0
exit
!
interface eth3
 ip address 10.0.13.1/24
 ip ospf 1 area 0
exit
!
interface eth4
 ip address 10.0.0.1/23
 ip ospf 1 area 0
 passive-interface eth4
exit
!
interface eth5
 ip address 192.168.100.1/24
exit
!
interface lo
 ip address 65.0.1.1/32
 passive-interface lo
exit
!
ip route 192.168.1.0/24 192.168.100.91
!
router bgp 65001
 bgp router-id 172.22.1.1
 bgp log-neighbor-changes
 no bgp ebgp-requires-policy
 no bgp network import-check
 neighbor 172.22.1.2 remote-as 65002
 neighbor 172.22.1.2 description eBGP peer to AS65002
 !
 address-family ipv4 unicast
  redistribute ospf
  redistribute static
 exit-address-family
exit
!
router ospf 1
 ospf router-id 65.0.1.1
 network 10.0.0.0 0.0.1.255 area 0
 network 10.0.12.0 0.0.0.255 area 0
 network 10.0.13.0 0.0.0.255 area 0
 redistribute static metric-type 1
 redistribute bgp metric-type 1
exit
!
access-list term seq 5 permit 127.0.0.1/32
access-list term seq 10 deny any
access-list localsite seq 15 deny 172.20.20.0/24
access-list localsite seq 20 permit 192.168.100.0/24
access-list localsite seq 25 permit 192.168.1.0/24
!
ip prefix-list internal-networks seq 5 permit 10.1.0.0/24
!
route-map lanroutes permit 10
 match ip address localsite
exit
!